- name: Build full
  tag: builder
  service: make
  command: make build-full TAG=master COMMIT=${CI_REPO_NAME}/${CI_COMMIT_ID} BUILD=${CI_BUILD_ID} MAINTAINER=${CI_COMMITTER_NAME}<${CI_COMMITTER_EMAIL}>
- name: Build service only
  exclude: builder
  service: make
  command: make build TAG=${CI_BRANCH} COMMIT=${CI_REPO_NAME}/${CI_COMMIT_ID} BUILD=${CI_BUILD_ID} MAINTAINER=${CI_COMMITTER_NAME}<${CI_COMMITTER_EMAIL}>

- name: Code coverage
  exclude: builder
  service: make
  command: make codecov-branch TAG=${CI_BRANCH}

- name: Release
  tag: ^(builder|mater)$
  service: make
  command: make release TAG=master